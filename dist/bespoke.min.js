/*! Bespoke.js v0.0.1-alpha-5 | (c) 2013 Mark Dalgleish | Licensed MIT */
(function(e,t,n){"use strict";var r=[],i=function(e,t){var i=n.querySelector(e),s=[].slice.call(i.children,0),u=s[0],a=function(){d(1)},f=function(){d(-1)},h=function(e){if(e==null)return;u=s[e]||e,s.forEach(p),l(u,"active"),c(u,"inactive")},p=function(e,t){["before+","before-[0-9]+","after","after-[0-9]+","active"].forEach(c.bind(null,e));if(e===u)return;var n=t-s.indexOf(u),r=n>0?"after":"before";["inactive",r,r+"-"+Math.abs(n)].forEach(l.bind(null,e))},d=function(e){h(s[s.indexOf(u)+e])};h(s[0]),l(i,"parent"),s.forEach(function(e){l(e,"slide")});var v={to:h,next:a,prev:f,parent:i,slides:s};return Object.keys(t||{}).forEach(function(e){var n=t[e];n&&o[e](v,n===!0?{}:n)}),r.push(v),v},s=function(e){return function(t){var r,i,s=function(t){return function(n){n.preventDefault(),n.touches.length===1&&t(n.touches[0]["page"+e])}};n.addEventListener("keydown",function(n){var r=n.which;e==="X"?(r===37&&t.prev(),(r===32||r===39)&&t.next()):(r===38&&t.prev(),(r===32||r===40)&&t.next())}),n.addEventListener("touchstart",s(function(e){r=e})),n.addEventListener("touchmove",s(function(e){i=e-r})),n.addEventListener("touchend",function(){if(Math.abs(i)<100)return;i>0?t.prev():t.next()})}},o={horizontal:s("X"),vertical:s("Y")},u=function(e,t){return f(t).test(e.className)},a=function(t){return t=t===e?t:e+"-"+t},f=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)","gi")},l=function(e,t){t=a(t),u(e,t)||(e.className+=(e.className?" ":"")+t)},c=function(e,t){t=a(t),u(e,t)&&(e.className=e.className.replace(f(t)," ").replace(/^\s+|\s+$/g,""))},h=function(e){return function(t){r.forEach(function(n){n[e].call(null,t)})}},p=function(e){return{from:function(t,n){return n=n||{},n[e]=!0,i(t,n)}}};t[e]={from:i,to:h("to"),next:h("next"),prev:h("prev"),horizontal:p("horizontal"),vertical:p("vertical"),plugins:o,decks:r}})("bespoke",this,this.document);