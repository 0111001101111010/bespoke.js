/*! Bespoke.js v0.0.1-alpha-4 | (c) 2013 Mark Dalgleish | Licensed MIT */
(function(e,t,n,r){"use strict";var i=[],s=function(e){var t=n.querySelectorAll(e)[0],r=o(t.children),s=r[0],u=function(e){return r[e]||e},a=function(e,t){return r[r.indexOf(e)+t]},f=function(e){return a(e,1)},c=function(e){return a(e,-1)},p=function(){g(f(s))},v=function(){g(c(s))},g=function(e){if(e==null)return;s=u(e),r.forEach(y),l(s,"active"),d(s,"inactive")},y=function(e,t){m(e,["before+","before-[0-9]+","after","after-[0-9]+","active"]);if(e===s)return;var n=t-r.indexOf(s),i=n>0?"after":"before";h(e,["inactive",i,i+"-"+Math.abs(n)])},b=function(e){var t=e.which||e.keyCode;t===37?v():(t===32||t===39)&&p()};g(r[0]),l(t,"parent"),l(r,"slide"),n.addEventListener("keydown",b),function(){var e,t,r=function(e){return function(t){t.preventDefault(),t.touches.length===1&&e(t.touches[0].pageX)}};n.addEventListener("touchstart",r(function(t){e=t})),n.addEventListener("touchmove",r(function(e){t=e})),n.addEventListener("touchend",function(){var n=t-e;if(Math.abs(n)<100)return;n>0?v():p()})}();var w={"goto":g,next:p,prev:v};return i.push(w),w},o=function(e){return[].slice.call(e,0)},u=function(t){return t=t===e?t:e+"-"+t},a=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)","gi")},f=function(e,t){return a(t).test(e.className)},l=function(e,t){return r(e)&&c(e,t)||r(t)&&h(e,t)||p(e,t)},c=function(e,t){e.forEach(function(e){l(e,t)})},h=function(e,t){t.forEach(function(t){l(e,t)})},p=function(e,t){t=u(t),f(e,t)||(e.className+=(e.className?" ":"")+t)},d=function(e,t){return r(e)&&v(e,t)||r(t)&&m(e,t)||g(e,t)},v=function(e,t){e.forEach(function(e){d(e,t)})},m=function(e,t){t.forEach(function(t){d(e,t)})},g=function(e,t){t=u(t),f(e,t)&&(e.className=e.className.replace(a(t)," ").replace(/^\s+|\s+$/g,""))},y=function(e){return function(){var t=arguments;i.forEach(function(n){n[e].apply(null,t)})}};t[e]={decks:i,from:s,next:y("next"),prev:y("prev"),"goto":y("goto")}})("bespoke",this,this.document,Array.isArray);