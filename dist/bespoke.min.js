/*! Bespoke.js v0.2.2 Â© 2013 Mark Dalgleish, Licensed MIT */
!function(a,b,c){var d=function(a,b){var d=c.querySelector(a),h=[].slice.call(d.children,0),i=h[0],j={},l=function(a,b){h[a]&&(r("deactivate",s(i,b)),i=h[a],h.map(m),r("activate",s(i,b)),f(i,"active"),g(i,"inactive"))},m=function(a,b){var c=b-h.indexOf(i),d=c>0?"after":"before";["before(-\\d+)?","after(-\\d+)?","active","inactive"].map(g.bind(null,a)),a!=i&&["inactive",d,d+"-"+Math.abs(c)].map(f.bind(null,a))},n=function(a,b){r("slide",s(h[a],b))&&l(a,b)},o=function(a){var b=h.indexOf(i)+1;r("next",s(i,a))&&l(b,a)},p=function(a){var b=h.indexOf(i)-1;r("prev",s(i,a))&&l(b,a)},q=function(a,b){return(j[a]||(j[a]=[])).push(b),function(){j[a]=j[a].filter(function(a){return a!=b})}},r=function(a,b){return(j[a]||[]).reduce(function(a,c){return a&&c(b)!==!1},!0)},s=function(a,b){return b=b||{},b.index=h.indexOf(a),b.slide=a,b},t={on:q,fire:r,slide:n,next:o,prev:p,parent:d,slides:h};return f(d,"parent"),h.map(function(a){f(a,"slide")}),Object.keys(b||{}).map(function(a){k[a](t,b[a])}),l(0),e.push(t),t},e=[],f=function(b,c){b.classList.add(a+"-"+c)},g=function(b,c){b.className=b.className.replace(RegExp(a+"-"+c+"(\\s|$)","g")," ").replace(/^\s+|\s+$/g,"")},h=function(a){return function(b){e.map(function(c){c[a](b)})}},i=function(a){return{from:function(b,c){return(c=c||{})[a]=!0,d(b,c)}}},j=function(a){return function(b){var d,e;c.addEventListener("keydown",function(c){var d=c.which;(34==d||32==d||"X"==a&&39==d||"Y"==a&&40==d)&&b.next(),(33==d||"X"==a&&37==d||"Y"==a&&38==d)&&b.prev()}),b.parent.addEventListener("touchstart",function(b){b.touches.length&&(d=b.touches[0]["page"+a],e=0)}),b.parent.addEventListener("touchmove",function(b){b.touches.length&&(b.preventDefault(),e=b.touches[0]["page"+a]-d)}),b.parent.addEventListener("touchend",function(){Math.abs(e)>50&&(e>0?b.prev():b.next())})}},k={horizontal:j("X"),vertical:j("Y")};b[a]={from:d,slide:h("slide"),next:h("next"),prev:h("prev"),horizontal:i("horizontal"),vertical:i("vertical"),plugins:k}}("bespoke",this,document);